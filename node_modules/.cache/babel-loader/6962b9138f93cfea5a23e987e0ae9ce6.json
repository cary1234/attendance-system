{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar https_1 = __importDefault(require(\"https\"));\n\nvar en_US_json_1 = __importDefault(require(\"../config/en_US.json\"));\n\nvar lruCache_1 = __importDefault(require(\"./cache/lruCache\"));\n\nvar apiLimitError_1 = __importDefault(require(\"./errors/apiLimitError\"));\n\nvar common_1 = require(\"./common\");\n\nvar version_1 = __importDefault(require(\"./version\"));\n\nvar clientUserAgent = \"IPinfoClient/nodejs/\" + version_1.default;\n\nvar IPinfoWrapper = function () {\n  function IPinfoWrapper(token, cache, timeout) {\n    this.mapLimitErrorMessage = \"You have exceeded maximum IP upload limit per request.\";\n    this.token = token;\n    this.countries = en_US_json_1.default;\n    this.cache = cache ? cache : new lruCache_1.default();\n    this.timeout = timeout === null || timeout === undefined ? common_1.REQUEST_TIMEOUT_DEFAULT : timeout;\n  }\n\n  IPinfoWrapper.cacheKey = function (k) {\n    return k + \":\" + common_1.CACHE_VSN;\n  };\n\n  IPinfoWrapper.prototype.lookupIp = function (ip) {\n    var _this = this;\n\n    var data = this.cache.get(IPinfoWrapper.cacheKey(ip));\n\n    if (data) {\n      return new Promise(function (resolve) {\n        resolve(data);\n      });\n    }\n\n    var config = {\n      headers: {\n        Accept: \"application/json\",\n        Authorization: \"Bearer \" + this.token,\n        \"Content-Type\": \"application/json\",\n        \"User-Agent\": clientUserAgent\n      },\n      method: \"GET\",\n      host: common_1.HOST,\n      path: \"/\" + ip,\n      timeout: this.timeout\n    };\n    return new Promise(function (resolve, reject) {\n      try {\n        var req = https_1.default.request(config, function (res) {\n          var data = \"\";\n          res.on(\"data\", function (chunk) {\n            data += chunk;\n          });\n\n          if (!_this.is4xxOr5xx(res.statusCode)) {\n            res.on(\"close\", function () {\n              var ipinfo = JSON.parse(data);\n\n              if (ipinfo.country) {\n                ipinfo.countryCode = ipinfo.country;\n                ipinfo.country = _this.countries[ipinfo.countryCode];\n              }\n\n              if (ipinfo.abuse && ipinfo.abuse.country) {\n                ipinfo.abuse.countryCode = ipinfo.abuse.country;\n                ipinfo.abuse.country = _this.countries[ipinfo.abuse.countryCode];\n              }\n\n              _this.cache.set(IPinfoWrapper.cacheKey(ip), ipinfo);\n\n              resolve(ipinfo);\n            });\n            res.on(\"error\", function (error) {\n              reject(error);\n            });\n          } else {\n            if (res.statusCode === 429) {\n              reject(new apiLimitError_1.default());\n            } else {\n              res.on(\"close\", function () {\n                reject(new Error(data));\n              });\n            }\n          }\n        });\n        req.on(\"error\", function (error) {\n          reject(error);\n        });\n        req.end();\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  IPinfoWrapper.prototype.lookupASN = function (asn) {\n    var _this = this;\n\n    var data = this.cache.get(IPinfoWrapper.cacheKey(asn));\n\n    if (data) {\n      return new Promise(function (resolve) {\n        resolve(data);\n      });\n    }\n\n    var config = {\n      headers: {\n        Accept: \"application/json\",\n        Authorization: \"Bearer \" + this.token,\n        \"Content-Type\": \"application/json\",\n        \"User-Agent\": clientUserAgent\n      },\n      method: \"GET\",\n      host: common_1.HOST,\n      path: \"/\" + asn + \"/json\",\n      timeout: this.timeout\n    };\n    return new Promise(function (resolve, reject) {\n      try {\n        var req = https_1.default.request(config, function (res) {\n          var data = \"\";\n          res.on(\"data\", function (chunk) {\n            data += chunk;\n          });\n\n          if (!_this.is4xxOr5xx(res.statusCode)) {\n            res.on(\"close\", function () {\n              var asnResp = JSON.parse(data);\n\n              if (asnResp.country) {\n                asnResp.countryCode = asnResp.country;\n                asnResp.country = _this.countries[asnResp.countryCode];\n              }\n\n              _this.cache.set(IPinfoWrapper.cacheKey(asn), asnResp);\n\n              resolve(asnResp);\n            });\n            res.on(\"error\", function (error) {\n              reject(error);\n            });\n          } else {\n            if (res.statusCode === 429) {\n              reject(new apiLimitError_1.default());\n            } else {\n              res.on(\"close\", function () {\n                reject(new Error(data));\n              });\n            }\n          }\n        });\n        req.on(\"error\", function (error) {\n          reject(error);\n        });\n        req.end();\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  IPinfoWrapper.prototype.getMap = function (ips) {\n    var _this = this;\n\n    if (ips.length > 500000) {\n      return new Promise(function (_resolve, reject) {\n        reject(new Error(_this.mapLimitErrorMessage));\n      });\n    }\n\n    var ipsData = JSON.stringify(ips);\n    var config = {\n      headers: {\n        Accept: \"application/json\",\n        Authorization: \"Bearer \" + this.token,\n        \"Content-Type\": \"application/json\",\n        \"Content-Length\": ipsData.length,\n        \"User-Agent\": clientUserAgent\n      },\n      method: \"POST\",\n      host: common_1.HOST,\n      path: \"/tools/map?cli=1\",\n      timeout: this.timeout\n    };\n    return new Promise(function (resolve, reject) {\n      try {\n        var req = https_1.default.request(config, function (res) {\n          var data = \"\";\n          res.on(\"data\", function (chunk) {\n            data += chunk;\n          });\n\n          if (!_this.is4xxOr5xx(res.statusCode)) {\n            res.on(\"close\", function () {\n              resolve(JSON.parse(data));\n            });\n            res.on(\"error\", function (error) {\n              reject(error);\n            });\n          } else {\n            if (res.statusCode === 429) {\n              reject(new apiLimitError_1.default());\n            } else {\n              res.on(\"close\", function () {\n                reject(new Error(data));\n              });\n            }\n          }\n        });\n        req.on(\"error\", function (error) {\n          reject(error);\n        });\n        req.write(ipsData);\n        req.end();\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  IPinfoWrapper.prototype.__getBatch = function (ips, batchTimeout, filter) {\n    var _this = this;\n\n    var ipsData = JSON.stringify(ips);\n    var config = {\n      headers: {\n        Accept: \"application/json\",\n        Authorization: \"Bearer \" + this.token,\n        \"Content-Type\": \"application/json\",\n        \"Content-Length\": ipsData.length,\n        \"User-Agent\": clientUserAgent\n      },\n      method: \"POST\",\n      host: common_1.HOST,\n      path: \"/batch\" + (filter ? \"?filter=1\" : \"\"),\n      timeout: batchTimeout\n    };\n    return new Promise(function (resolve, reject) {\n      try {\n        var req = https_1.default.request(config, function (res) {\n          var data = \"\";\n          res.on(\"data\", function (chunk) {\n            data += chunk;\n          });\n\n          if (!_this.is4xxOr5xx(res.statusCode)) {\n            res.on(\"close\", function () {\n              resolve(data);\n            });\n            res.on(\"error\", function (error) {\n              reject(error);\n            });\n          } else {\n            if (res.statusCode === 429) {\n              reject(new apiLimitError_1.default());\n            } else {\n              res.on(\"close\", function () {\n                reject(new Error(data));\n              });\n            }\n          }\n        });\n        req.on(\"timeout\", function () {\n          reject(new Error(\"batch timeout reached\"));\n        });\n        req.on(\"error\", function (error) {\n          reject(error);\n        });\n        req.write(ipsData);\n        req.end();\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  IPinfoWrapper.prototype.getBatch = function (urls, batchSize, batchTimeout, timeoutTotal, filter) {\n    if (batchSize === void 0) {\n      batchSize = common_1.BATCH_MAX_SIZE;\n    }\n\n    if (batchTimeout === void 0) {\n      batchTimeout = common_1.BATCH_REQ_TIMEOUT_DEFAULT;\n    }\n\n    if (timeoutTotal === void 0) {\n      timeoutTotal = 0;\n    }\n\n    if (filter === void 0) {\n      filter = false;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var result, lookupUrls, promises, i, end, resDetails, batchPromise, totalTimeoutReached, totalTimeoutRef, timeoutPromise;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            result = {};\n\n            if (urls.length == 0) {\n              return [2, new Promise(function (resolve) {\n                resolve(result);\n              })];\n            }\n\n            if (batchSize <= 0 || batchSize > common_1.BATCH_MAX_SIZE) {\n              batchSize = common_1.BATCH_MAX_SIZE;\n            }\n\n            lookupUrls = [];\n            urls.forEach(function (url) {\n              var cachedUrl = _this.cache.get(IPinfoWrapper.cacheKey(url));\n\n              if (cachedUrl) {\n                result[url] = cachedUrl;\n              } else {\n                lookupUrls.push(url);\n              }\n            });\n\n            if (lookupUrls.length == 0) {\n              return [2, new Promise(function (resolve) {\n                resolve(result);\n              })];\n            }\n\n            promises = [];\n\n            for (i = 0; i < lookupUrls.length; i += batchSize) {\n              end = i + batchSize;\n\n              if (end > lookupUrls.length) {\n                end = lookupUrls.length;\n              }\n\n              resDetails = this.__getBatch(lookupUrls.slice(i, end), batchTimeout, filter);\n              promises.push(resDetails);\n            }\n\n            batchPromise = Promise.all(promises).then(function (values) {\n              values.forEach(function (el) {\n                var batchResp = JSON.parse(el);\n\n                for (var key in batchResp) {\n                  if (batchResp.hasOwnProperty(key)) {\n                    var ipinfo = batchResp[key];\n\n                    if (ipinfo.error) {\n                      delete batchResp[key];\n                    } else {\n                      if (ipinfo.country) {\n                        ipinfo.countryCode = ipinfo.country;\n                        ipinfo.country = _this.countries[ipinfo.countryCode];\n                      }\n\n                      if (ipinfo.abuse && ipinfo.abuse.country) {\n                        ipinfo.abuse.countryCode = ipinfo.abuse.country;\n                        ipinfo.abuse.country = _this.countries[ipinfo.abuse.countryCode];\n                      }\n\n                      _this.cache.set(IPinfoWrapper.cacheKey(key), ipinfo);\n\n                      result[key] = batchResp[key];\n                    }\n                  }\n                }\n              });\n            });\n            totalTimeoutReached = Symbol();\n            timeoutPromise = new Promise(function (resolve) {\n              if (timeoutTotal > 0) {\n                totalTimeoutRef = setTimeout(resolve, timeoutTotal, totalTimeoutReached);\n              }\n            });\n            return [4, Promise.race([batchPromise, timeoutPromise]).then(function (value) {\n              return new Promise(function (resolve, reject) {\n                if (value === totalTimeoutReached) {\n                  reject(new Error(\"Total timeout has been exceeded.\"));\n                } else {\n                  if (totalTimeoutRef) {\n                    clearTimeout(totalTimeoutRef);\n                  }\n\n                  resolve(result);\n                }\n              });\n            })];\n\n          case 1:\n            return [2, _a.sent()];\n        }\n      });\n    });\n  };\n\n  IPinfoWrapper.prototype.is4xxOr5xx = function (statusCode) {\n    return statusCode && statusCode >= 400 && statusCode < 600;\n  };\n\n  return IPinfoWrapper;\n}();\n\nexports.default = IPinfoWrapper;","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__importDefault","mod","__esModule","Object","defineProperty","exports","https_1","require","en_US_json_1","lruCache_1","apiLimitError_1","common_1","version_1","clientUserAgent","default","IPinfoWrapper","token","cache","timeout","mapLimitErrorMessage","countries","undefined","REQUEST_TIMEOUT_DEFAULT","cacheKey","k","CACHE_VSN","prototype","lookupIp","ip","_this","data","get","config","headers","Accept","Authorization","method","host","HOST","path","req","request","res","on","chunk","is4xxOr5xx","statusCode","ipinfo","JSON","parse","country","countryCode","abuse","set","error","Error","end","lookupASN","asn","asnResp","getMap","ips","_resolve","ipsData","stringify","write","__getBatch","batchTimeout","filter","getBatch","urls","batchSize","timeoutTotal","BATCH_MAX_SIZE","BATCH_REQ_TIMEOUT_DEFAULT","lookupUrls","promises","i","resDetails","batchPromise","totalTimeoutReached","totalTimeoutRef","timeoutPromise","_a","forEach","url","cachedUrl","slice","all","values","el","batchResp","key","hasOwnProperty","setTimeout","race","clearTimeout"],"sources":["C:/Users/CBondoc Desktop/Desktop/KodeGo/attendance-system/node_modules/node-ipinfo/dist/src/ipinfoWrapper.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar https_1 = __importDefault(require(\"https\"));\nvar en_US_json_1 = __importDefault(require(\"../config/en_US.json\"));\nvar lruCache_1 = __importDefault(require(\"./cache/lruCache\"));\nvar apiLimitError_1 = __importDefault(require(\"./errors/apiLimitError\"));\nvar common_1 = require(\"./common\");\nvar version_1 = __importDefault(require(\"./version\"));\nvar clientUserAgent = \"IPinfoClient/nodejs/\" + version_1.default;\nvar IPinfoWrapper = (function () {\n    function IPinfoWrapper(token, cache, timeout) {\n        this.mapLimitErrorMessage = \"You have exceeded maximum IP upload limit per request.\";\n        this.token = token;\n        this.countries = en_US_json_1.default;\n        this.cache = cache ? cache : new lruCache_1.default();\n        this.timeout =\n            timeout === null || timeout === undefined\n                ? common_1.REQUEST_TIMEOUT_DEFAULT\n                : timeout;\n    }\n    IPinfoWrapper.cacheKey = function (k) {\n        return k + \":\" + common_1.CACHE_VSN;\n    };\n    IPinfoWrapper.prototype.lookupIp = function (ip) {\n        var _this = this;\n        var data = this.cache.get(IPinfoWrapper.cacheKey(ip));\n        if (data) {\n            return new Promise(function (resolve) {\n                resolve(data);\n            });\n        }\n        var config = {\n            headers: {\n                Accept: \"application/json\",\n                Authorization: \"Bearer \" + this.token,\n                \"Content-Type\": \"application/json\",\n                \"User-Agent\": clientUserAgent\n            },\n            method: \"GET\",\n            host: common_1.HOST,\n            path: \"/\" + ip,\n            timeout: this.timeout\n        };\n        return new Promise(function (resolve, reject) {\n            try {\n                var req = https_1.default.request(config, function (res) {\n                    var data = \"\";\n                    res.on(\"data\", function (chunk) {\n                        data += chunk;\n                    });\n                    if (!_this.is4xxOr5xx(res.statusCode)) {\n                        res.on(\"close\", function () {\n                            var ipinfo = JSON.parse(data);\n                            if (ipinfo.country) {\n                                ipinfo.countryCode = ipinfo.country;\n                                ipinfo.country =\n                                    _this.countries[ipinfo.countryCode];\n                            }\n                            if (ipinfo.abuse && ipinfo.abuse.country) {\n                                ipinfo.abuse.countryCode =\n                                    ipinfo.abuse.country;\n                                ipinfo.abuse.country =\n                                    _this.countries[ipinfo.abuse.countryCode];\n                            }\n                            _this.cache.set(IPinfoWrapper.cacheKey(ip), ipinfo);\n                            resolve(ipinfo);\n                        });\n                        res.on(\"error\", function (error) {\n                            reject(error);\n                        });\n                    }\n                    else {\n                        if (res.statusCode === 429) {\n                            reject(new apiLimitError_1.default());\n                        }\n                        else {\n                            res.on(\"close\", function () {\n                                reject(new Error(data));\n                            });\n                        }\n                    }\n                });\n                req.on(\"error\", function (error) {\n                    reject(error);\n                });\n                req.end();\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    };\n    IPinfoWrapper.prototype.lookupASN = function (asn) {\n        var _this = this;\n        var data = this.cache.get(IPinfoWrapper.cacheKey(asn));\n        if (data) {\n            return new Promise(function (resolve) {\n                resolve(data);\n            });\n        }\n        var config = {\n            headers: {\n                Accept: \"application/json\",\n                Authorization: \"Bearer \" + this.token,\n                \"Content-Type\": \"application/json\",\n                \"User-Agent\": clientUserAgent\n            },\n            method: \"GET\",\n            host: common_1.HOST,\n            path: \"/\" + asn + \"/json\",\n            timeout: this.timeout\n        };\n        return new Promise(function (resolve, reject) {\n            try {\n                var req = https_1.default.request(config, function (res) {\n                    var data = \"\";\n                    res.on(\"data\", function (chunk) {\n                        data += chunk;\n                    });\n                    if (!_this.is4xxOr5xx(res.statusCode)) {\n                        res.on(\"close\", function () {\n                            var asnResp = JSON.parse(data);\n                            if (asnResp.country) {\n                                asnResp.countryCode = asnResp.country;\n                                asnResp.country =\n                                    _this.countries[asnResp.countryCode];\n                            }\n                            _this.cache.set(IPinfoWrapper.cacheKey(asn), asnResp);\n                            resolve(asnResp);\n                        });\n                        res.on(\"error\", function (error) {\n                            reject(error);\n                        });\n                    }\n                    else {\n                        if (res.statusCode === 429) {\n                            reject(new apiLimitError_1.default());\n                        }\n                        else {\n                            res.on(\"close\", function () {\n                                reject(new Error(data));\n                            });\n                        }\n                    }\n                });\n                req.on(\"error\", function (error) {\n                    reject(error);\n                });\n                req.end();\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    };\n    IPinfoWrapper.prototype.getMap = function (ips) {\n        var _this = this;\n        if (ips.length > 500000) {\n            return new Promise(function (_resolve, reject) {\n                reject(new Error(_this.mapLimitErrorMessage));\n            });\n        }\n        var ipsData = JSON.stringify(ips);\n        var config = {\n            headers: {\n                Accept: \"application/json\",\n                Authorization: \"Bearer \" + this.token,\n                \"Content-Type\": \"application/json\",\n                \"Content-Length\": ipsData.length,\n                \"User-Agent\": clientUserAgent\n            },\n            method: \"POST\",\n            host: common_1.HOST,\n            path: \"/tools/map?cli=1\",\n            timeout: this.timeout\n        };\n        return new Promise(function (resolve, reject) {\n            try {\n                var req = https_1.default.request(config, function (res) {\n                    var data = \"\";\n                    res.on(\"data\", function (chunk) {\n                        data += chunk;\n                    });\n                    if (!_this.is4xxOr5xx(res.statusCode)) {\n                        res.on(\"close\", function () {\n                            resolve(JSON.parse(data));\n                        });\n                        res.on(\"error\", function (error) {\n                            reject(error);\n                        });\n                    }\n                    else {\n                        if (res.statusCode === 429) {\n                            reject(new apiLimitError_1.default());\n                        }\n                        else {\n                            res.on(\"close\", function () {\n                                reject(new Error(data));\n                            });\n                        }\n                    }\n                });\n                req.on(\"error\", function (error) {\n                    reject(error);\n                });\n                req.write(ipsData);\n                req.end();\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    };\n    IPinfoWrapper.prototype.__getBatch = function (ips, batchTimeout, filter) {\n        var _this = this;\n        var ipsData = JSON.stringify(ips);\n        var config = {\n            headers: {\n                Accept: \"application/json\",\n                Authorization: \"Bearer \" + this.token,\n                \"Content-Type\": \"application/json\",\n                \"Content-Length\": ipsData.length,\n                \"User-Agent\": clientUserAgent\n            },\n            method: \"POST\",\n            host: common_1.HOST,\n            path: \"/batch\" + (filter ? \"?filter=1\" : \"\"),\n            timeout: batchTimeout\n        };\n        return new Promise(function (resolve, reject) {\n            try {\n                var req = https_1.default.request(config, function (res) {\n                    var data = \"\";\n                    res.on(\"data\", function (chunk) {\n                        data += chunk;\n                    });\n                    if (!_this.is4xxOr5xx(res.statusCode)) {\n                        res.on(\"close\", function () {\n                            resolve(data);\n                        });\n                        res.on(\"error\", function (error) {\n                            reject(error);\n                        });\n                    }\n                    else {\n                        if (res.statusCode === 429) {\n                            reject(new apiLimitError_1.default());\n                        }\n                        else {\n                            res.on(\"close\", function () {\n                                reject(new Error(data));\n                            });\n                        }\n                    }\n                });\n                req.on(\"timeout\", function () {\n                    reject(new Error(\"batch timeout reached\"));\n                });\n                req.on(\"error\", function (error) {\n                    reject(error);\n                });\n                req.write(ipsData);\n                req.end();\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    };\n    IPinfoWrapper.prototype.getBatch = function (urls, batchSize, batchTimeout, timeoutTotal, filter) {\n        if (batchSize === void 0) { batchSize = common_1.BATCH_MAX_SIZE; }\n        if (batchTimeout === void 0) { batchTimeout = common_1.BATCH_REQ_TIMEOUT_DEFAULT; }\n        if (timeoutTotal === void 0) { timeoutTotal = 0; }\n        if (filter === void 0) { filter = false; }\n        return __awaiter(this, void 0, void 0, function () {\n            var result, lookupUrls, promises, i, end, resDetails, batchPromise, totalTimeoutReached, totalTimeoutRef, timeoutPromise;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        result = {};\n                        if (urls.length == 0) {\n                            return [2, new Promise(function (resolve) {\n                                    resolve(result);\n                                })];\n                        }\n                        if (batchSize <= 0 || batchSize > common_1.BATCH_MAX_SIZE) {\n                            batchSize = common_1.BATCH_MAX_SIZE;\n                        }\n                        lookupUrls = [];\n                        urls.forEach(function (url) {\n                            var cachedUrl = _this.cache.get(IPinfoWrapper.cacheKey(url));\n                            if (cachedUrl) {\n                                result[url] = cachedUrl;\n                            }\n                            else {\n                                lookupUrls.push(url);\n                            }\n                        });\n                        if (lookupUrls.length == 0) {\n                            return [2, new Promise(function (resolve) {\n                                    resolve(result);\n                                })];\n                        }\n                        promises = [];\n                        for (i = 0; i < lookupUrls.length; i += batchSize) {\n                            end = i + batchSize;\n                            if (end > lookupUrls.length) {\n                                end = lookupUrls.length;\n                            }\n                            resDetails = this.__getBatch(lookupUrls.slice(i, end), batchTimeout, filter);\n                            promises.push(resDetails);\n                        }\n                        batchPromise = Promise.all(promises).then(function (values) {\n                            values.forEach(function (el) {\n                                var batchResp = JSON.parse(el);\n                                for (var key in batchResp) {\n                                    if (batchResp.hasOwnProperty(key)) {\n                                        var ipinfo = batchResp[key];\n                                        if (ipinfo.error) {\n                                            delete batchResp[key];\n                                        }\n                                        else {\n                                            if (ipinfo.country) {\n                                                ipinfo.countryCode = ipinfo.country;\n                                                ipinfo.country =\n                                                    _this.countries[ipinfo.countryCode];\n                                            }\n                                            if (ipinfo.abuse && ipinfo.abuse.country) {\n                                                ipinfo.abuse.countryCode =\n                                                    ipinfo.abuse.country;\n                                                ipinfo.abuse.country =\n                                                    _this.countries[ipinfo.abuse.countryCode];\n                                            }\n                                            _this.cache.set(IPinfoWrapper.cacheKey(key), ipinfo);\n                                            result[key] = batchResp[key];\n                                        }\n                                    }\n                                }\n                            });\n                        });\n                        totalTimeoutReached = Symbol();\n                        timeoutPromise = new Promise(function (resolve) {\n                            if (timeoutTotal > 0) {\n                                totalTimeoutRef = setTimeout(resolve, timeoutTotal, totalTimeoutReached);\n                            }\n                        });\n                        return [4, Promise.race([batchPromise, timeoutPromise]).then(function (value) {\n                                return new Promise(function (resolve, reject) {\n                                    if (value === totalTimeoutReached) {\n                                        reject(new Error(\"Total timeout has been exceeded.\"));\n                                    }\n                                    else {\n                                        if (totalTimeoutRef) {\n                                            clearTimeout(totalTimeoutRef);\n                                        }\n                                        resolve(result);\n                                    }\n                                });\n                            })];\n                    case 1: return [2, _a.sent()];\n                }\n            });\n        });\n    };\n    IPinfoWrapper.prototype.is4xxOr5xx = function (statusCode) {\n        return statusCode && statusCode >= 400 && statusCode < 600;\n    };\n    return IPinfoWrapper;\n}());\nexports.default = IPinfoWrapper;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}